{{- $currentPage := . -}}
<ul class="nav-menu">
    {{- range .Site.Menus.main -}}
        {{- if .HasChildren }}
        <li class="nav-item has-children">
            <a href="{{ .URL }}" class="nav-link">{{ .Name }}</a>
            <ul class="nav-submenu">
                {{- range .Children }}
                <li class="nav-item">
                    <a href="{{ .URL }}" class="nav-link{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">{{ .Name }}</a>
                </li>
                {{- end }}
            </ul>
        </li>
        {{- else }}
        <li class="nav-item">
            <a href="{{ .URL }}" class="nav-link{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">{{ .Name }}</a>
        </li>
        {{- end }}
    {{- end }}
</ul>
